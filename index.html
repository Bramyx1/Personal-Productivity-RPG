<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Executive Operating System</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- LAYOUT LOCKED: Top Hero + KPI Row + Two-Column Content -->
    <main class="container">
      <header class="card hero-card">
        <div class="hero-left">
          <p class="eyebrow">Personal Productivity RPG</p>
          <h1>Executive Operating System</h1>
          <p class="subtitle">Run priorities like a company: plan actions, execute, and compound performance.</p>
        </div>
        <div class="hero-actions">
          <button id="help-open-btn" class="btn btn-secondary" type="button">How it works</button>
          <button id="reset-btn" class="btn" type="button">Reset</button>
        </div>
      </header>

      <section class="kpi-grid" aria-label="Performance dashboard">
        <article class="card kpi-card">
          <p class="label">Level</p>
          <p id="level" class="value value-mono">1</p>
        </article>

        <article class="card kpi-card kpi-xp">
          <p class="label">XP Progress</p>
          <div class="xp-row">
            <div class="xp-bar-wrap" aria-label="Experience progress">
              <div id="xp-bar" class="xp-bar"></div>
            </div>
            <p id="xp-text" class="xp-text value-mono">0 / 100</p>
          </div>
        </article>

        <article class="card kpi-card">
          <p class="label">Capital</p>
          <p id="capital" class="value value-mono">0</p>
        </article>

        <article class="card kpi-card">
          <p class="label">Streak</p>
          <p id="streak" class="value value-mono">0</p>
        </article>
      </section>

      <section class="content-grid">
        <div class="main-col">
          <section class="card panel">
            <div class="panel-head">
              <h2>Actions</h2>
              <p class="panel-note">Today Completed: <strong id="today-completed" class="value-mono">0</strong></p>
            </div>
            <form id="action-form" class="action-form">
              <label>
                Action Name
                <input id="action-name" type="text" maxlength="120" required placeholder="Finalize investor update" />
              </label>
              <label>
                Difficulty
                <select id="action-difficulty">
                  <option value="Easy">Easy</option>
                  <option value="Medium">Medium</option>
                  <option value="Hard">Hard</option>
                </select>
              </label>
              <button class="btn" type="submit">Add</button>
            </form>
            <ul id="action-list" class="action-list" aria-live="polite"></ul>
          </section>

          <section class="card panel">
            <div class="panel-head">
              <h2>History</h2>
            </div>
            <ul id="history-list" class="history-list" aria-live="polite"></ul>
          </section>

          <section class="card panel">
            <div class="panel-head">
              <h2>Daily Brief</h2>
            </div>
            <ul id="brief-list" class="brief-list" aria-live="polite"></ul>
          </section>
        </div>

        <aside class="side-col">
          <section class="card panel">
            <div class="panel-head">
              <h2>Core Stats</h2>
              <p class="panel-note">Rank: <strong id="rank-title">Associate Operator</strong></p>
            </div>
            <div class="stats-grid">
              <div class="stat-item">
                <span>Focus</span>
                <strong id="focus" class="value-mono">1</strong>
              </div>
              <div class="stat-item">
                <span>Discipline</span>
                <strong id="discipline" class="value-mono">1</strong>
              </div>
              <div class="stat-item">
                <span>Execution</span>
                <strong id="execution" class="value-mono">1</strong>
              </div>
            </div>
          </section>

          <section class="card panel">
            <div class="panel-head">
              <h2>Shop</h2>
            </div>
            <div class="shop-grid">
              <button class="shop-btn" type="button" data-item="Coffee">Coffee <span>30 capital • +10 XP</span></button>
              <button class="shop-btn" type="button" data-item="Deep Work Potion">
                Deep Work Potion <span>60 capital • +1 Focus</span>
              </button>
              <button class="shop-btn" type="button" data-item="Discipline Token">
                Discipline Token <span>60 capital • +1 Discipline</span>
              </button>
              <button class="shop-btn" type="button" data-item="Execution Scroll">
                Execution Scroll <span>60 capital • +1 Execution</span>
              </button>
            </div>
          </section>
        </aside>
      </section>
    </main>

    <div
      id="help-modal"
      class="help-modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="help-title"
      aria-hidden="true"
    >
      <div id="help-overlay" class="help-overlay"></div>
      <section id="help-panel" class="help-panel" tabindex="-1">
        <div class="help-head">
          <h2 id="help-title">Executive Operating System: How It Works</h2>
          <button id="help-close-btn" class="btn btn-secondary" type="button" aria-label="Close help">X</button>
        </div>
        <div class="help-content">
          <p>
            This system translates personal execution into operating metrics. You commit to high-leverage Actions,
            collect XP and Capital, and reinvest in capability growth.
          </p>

          <h3>Actions And Reward Mapping</h3>
          <ul>
            <li>Easy: +10 XP and +5 Capital</li>
            <li>Medium: +25 XP and +12 Capital</li>
            <li>Hard: +50 XP and +25 Capital</li>
          </ul>

          <h3>XP, Promotions, And Scaling</h3>
          <p>You start at Level 1 with 100 XP required. Each promotion adds +25 to the next threshold.</p>

          <h3>Core Stats</h3>
          <ul>
            <li>Focus: quality of concentrated work</li>
            <li>Discipline: consistency and follow-through</li>
            <li>Execution: delivery throughput and finish rate</li>
          </ul>

          <h3>Streak, History, And Persistence</h3>
          <ul>
            <li>Streak increments once per calendar day if at least one Action is completed</li>
            <li>Missing a day resets streak</li>
            <li>Archive moves completed Actions into History (capped at 20)</li>
            <li>All state persists in browser localStorage</li>
          </ul>
        </div>
      </section>
    </div>

    <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>

    <script src="app.js"></script>
  </body>
</html>
